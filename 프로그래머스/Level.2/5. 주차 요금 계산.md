# 주차 요금 계산

### [ 문제 정보 ]
> **프로그래머스**: https://school.programmers.co.kr/learn/courses/30/lessons/92341?language=cpp
> 
> **난이도**: 2
>
> **유형**: #구현


### [ 문제 풀이 ]
```C++
#include <string>
#include <vector>
#include <map>
#include <cmath>
#include <algorithm>
using namespace std;

struct Car {
    string in;
    int totalTime;
    bool isOut;
    
    Car() {}
        
    Car(string in) {
        this->in = in;
        this->totalTime = 0;
        this->isOut = false;
    }
    
    void setIn(string in) {
        this->in = in;
        this->isOut = false;
    }
};

map<string, Car> mp;

vector<string> split(string input, string del) {
    vector<string> result;
    auto start = 0;
    auto end = input.find(del);
    while (end != string::npos) {
        result.push_back(input.substr(start, end - start));
        start = end + del.size();
        end = input.find(del, start);
    }
    result.push_back(input.substr(start));
    return result;
}

int toIntTime(string time) {
    vector<string> v = split(time, ":");
    return stoi(v[0]) * 60 + stoi(v[1]);
}

int calTime(string in, string out) {
    return toIntTime(out) - toIntTime(in);
}

int calFee(int totalMinutes, vector<int> fees) {
    int baseTime = fees[0];
    int baseFee = fees[1];
    int unitTime = fees[2];
    int unitFee = fees[3];
    
    if (totalMinutes <= baseTime) {
        return baseFee;
    }
    
    int extraTime = totalMinutes - baseTime;
    int extraUnits = (int)ceil((double)extraTime / unitTime);
    
    return baseFee + (extraUnits * unitFee);
}

vector<int> solution(vector<int> fees, vector<string> records) {
    vector<int> answer;
    
    for (string record : records) {
        vector<string> v = split(record, " ");
        string time = v[0];
        string num = v[1];
        string inOut = v[2];
        
        if (inOut == "IN") {
            if (mp.find(num) != mp.end()) {
                Car& car = mp[num];
                car.setIn(time);
            }
            else {
                mp[num] = Car(time);
            }
        }
        else {
            Car& car = mp[num];
            int parkingTime = calTime(car.in, time);
            car.totalTime += parkingTime;
            car.isOut = true;
        }
    }
    
    for (auto& carPair : mp) {
        Car& car = carPair.second;
        int finalTime = car.totalTime;
        
        if (!car.isOut) {
            finalTime += calTime(car.in, "23:59");
        }
        
        int fee = calFee(finalTime, fees);
        answer.push_back(fee);
    }
    
    return answer;
}

```


---
@www.codrive.co.kr